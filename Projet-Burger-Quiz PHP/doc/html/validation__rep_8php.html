<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Projet Burger Quiz (PHP/JS): php/validation_rep.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Projet Burger Quiz (PHP/JS)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('validation__rep_8php.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">validation_rep.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2ae09f5d939f951cb57d4c1e99f6adcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#a2ae09f5d939f951cb57d4c1e99f6adcf">$tab_post</a> = array()</td></tr>
<tr class="memdesc:a2ae09f5d939f951cb57d4c1e99f6adcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tableau des réponses cochées par le joueur.  <a href="#a2ae09f5d939f951cb57d4c1e99f6adcf">More...</a><br /></td></tr>
<tr class="separator:a2ae09f5d939f951cb57d4c1e99f6adcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d3b514d9612929ecfd59b19dc9f2d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#a69d3b514d9612929ecfd59b19dc9f2d0">$bonne_rep</a> = 0</td></tr>
<tr class="separator:a69d3b514d9612929ecfd59b19dc9f2d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf982722c36878e448ad1a7993521f32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#aaf982722c36878e448ad1a7993521f32">$mauvaise_rep</a> = 0</td></tr>
<tr class="separator:aaf982722c36878e448ad1a7993521f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69135d5dc570efc19723e3b2ffc2a2e"><td class="memItemLeft" align="right" valign="top">for($i=0;$i&lt;$_SESSION[&quot;taille_tab&quot;];$i++) for($<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>=0;$<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>&lt; sizeof($tab_post);$<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>++)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#ac69135d5dc570efc19723e3b2ffc2a2e">$temps</a> = $_POST['temps']</td></tr>
<tr class="memdesc:ac69135d5dc570efc19723e3b2ffc2a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Met les valeurs des réponses cochées dans le tableau prévu.  <a href="#ac69135d5dc570efc19723e3b2ffc2a2e">More...</a><br /></td></tr>
<tr class="separator:ac69135d5dc570efc19723e3b2ffc2a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa021b2590868740e2d52762711ea145f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#aa021b2590868740e2d52762711ea145f">$score</a> = ceil(($bonne_rep/$temps)*10000)</td></tr>
<tr class="memdesc:aa021b2590868740e2d52762711ea145f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcul le score et arrondit à l'entier supérieur.  <a href="#aa021b2590868740e2d52762711ea145f">More...</a><br /></td></tr>
<tr class="separator:aa021b2590868740e2d52762711ea145f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ad401c0eb6aeea4894e337cef29fb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#a46ad401c0eb6aeea4894e337cef29fb2">$select_joueur</a> = $bdd-&gt;prepare(&quot;SELECT * FROM <a class="el" href="classJoueur.html">Joueur</a>&quot;)</td></tr>
<tr class="separator:a46ad401c0eb6aeea4894e337cef29fb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd2d041dece5905725806d84f993f91f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#abd2d041dece5905725806d84f993f91f">$joueurs</a> = $select_joueur-&gt;fetchAll(PDO::FETCH_CLASS, '<a class="el" href="classJoueur.html">Joueur</a>')</td></tr>
<tr class="separator:abd2d041dece5905725806d84f993f91f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cfa3974a8999c69e74ceb751fcbb8ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="affichage__palmares_8php.html#afe56a28cb697bafb010041c9dc77fcc2">foreach</a>($joueurs as $joueur)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#a6cfa3974a8999c69e74ceb751fcbb8ef">$update_score</a> = $bdd-&gt;prepare(&quot;UPDATE <a class="el" href="classPartie.html">Partie</a> SET score=&quot;.$score.&quot; WHERE id_partie= &quot;.$_SESSION[&quot;id_partie&quot;])</td></tr>
<tr class="memdesc:a6cfa3974a8999c69e74ceb751fcbb8ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Si le score du joueur est NULL, insert le score de la partie. Si le joueur possède déjà un score, vérifie s'il est plus petit que le dernier score obtenu, si oui, l'insert à la place.  <a href="#a6cfa3974a8999c69e74ceb751fcbb8ef">More...</a><br /></td></tr>
<tr class="separator:a6cfa3974a8999c69e74ceb751fcbb8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c26b3604a5a339ad7d1b8026a1d3fb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#a2c26b3604a5a339ad7d1b8026a1d3fb5">$insert_joue</a> = $bdd-&gt;prepare(&quot;INSERT INTO <a class="el" href="classJoue.html">Joue</a>(id_login, id_partie) VALUES(:id_login, :id_partie)&quot;)</td></tr>
<tr class="memdesc:a2c26b3604a5a339ad7d1b8026a1d3fb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert dans <a class="el" href="classJoue.html" title="Class Joue correspondant à la table Joue. Attributs privés : id_login, id_partie. Retourne par getter...">Joue</a> l'id de la partie jouée et l'id du joueur qui l'a joué  <a href="#a2c26b3604a5a339ad7d1b8026a1d3fb5">More...</a><br /></td></tr>
<tr class="separator:a2c26b3604a5a339ad7d1b8026a1d3fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e22068462ad4a06af0ccf83235356f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="validation__rep_8php.html#ab6e22068462ad4a06af0ccf83235356f">$_SESSION</a> [&quot;score&quot;] = $score</td></tr>
<tr class="memdesc:ab6e22068462ad4a06af0ccf83235356f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable de session de type tableau qui récupère le score final.  <a href="#ab6e22068462ad4a06af0ccf83235356f">More...</a><br /></td></tr>
<tr class="separator:ab6e22068462ad4a06af0ccf83235356f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab6e22068462ad4a06af0ccf83235356f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$_SESSION[&quot;score&quot;] = $score</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable de session de type tableau qui récupère le score final. </p>

</div>
</div>
<a class="anchor" id="a69d3b514d9612929ecfd59b19dc9f2d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$bonne_rep = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2c26b3604a5a339ad7d1b8026a1d3fb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$insert_joue = $bdd-&gt;prepare(&quot;INSERT INTO <a class="el" href="classJoue.html">Joue</a>(id_login, id_partie) VALUES(:id_login, :id_partie)&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert dans <a class="el" href="classJoue.html" title="Class Joue correspondant à la table Joue. Attributs privés : id_login, id_partie. Retourne par getter...">Joue</a> l'id de la partie jouée et l'id du joueur qui l'a joué </p>

</div>
</div>
<a class="anchor" id="abd2d041dece5905725806d84f993f91f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$joueurs = $select_joueur-&gt;fetchAll(PDO::FETCH_CLASS, '<a class="el" href="classJoueur.html">Joueur</a>')</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf982722c36878e448ad1a7993521f32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$mauvaise_rep = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa021b2590868740e2d52762711ea145f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$score = ceil(($bonne_rep/$temps)*10000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcul le score et arrondit à l'entier supérieur. </p>

</div>
</div>
<a class="anchor" id="a46ad401c0eb6aeea4894e337cef29fb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$select_joueur = $bdd-&gt;prepare(&quot;SELECT * FROM <a class="el" href="classJoueur.html">Joueur</a>&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ae09f5d939f951cb57d4c1e99f6adcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$tab_post = array()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tableau des réponses cochées par le joueur. </p>

</div>
</div>
<a class="anchor" id="ac69135d5dc570efc19723e3b2ffc2a2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">for ($i=0;$i&lt;$_SESSION[&quot;taille_tab&quot;];$i++) for ($<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>=0;$<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>&lt; sizeof($tab_post);$<a class="el" href="jquery_8js.html#ab26645c014aa005ecedef329ecf58c99">k</a>++) $temps = $_POST['temps']</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Met les valeurs des réponses cochées dans le tableau prévu. </p>
<p>Compare le tableau des réponses et le tableau des valeurs cochées. Incrémentation des bonnes réponses ou mauvaises Récupère le temps du chrono </p>

</div>
</div>
<a class="anchor" id="a6cfa3974a8999c69e74ceb751fcbb8ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="affichage__palmares_8php.html#afe56a28cb697bafb010041c9dc77fcc2">foreach</a> ($joueurs as $joueur) $update_score = $bdd-&gt;prepare(&quot;UPDATE <a class="el" href="classPartie.html">Partie</a> SET score=&quot;.$score.&quot; WHERE id_partie= &quot;.$_SESSION[&quot;id_partie&quot;])</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Si le score du joueur est NULL, insert le score de la partie. Si le joueur possède déjà un score, vérifie s'il est plus petit que le dernier score obtenu, si oui, l'insert à la place. </p>
<p>Change le score préalablement initialisé à NULL dans <a class="el" href="classPartie.html" title="Class Partie correspondant à la table Partie. Attributs privés : id_partie, score. Retourne par getter les attributs privés. ">Partie</a> </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_05194b7bb14e4bdbd759acf3e4294839.html">php</a></li><li class="navelem"><a class="el" href="validation__rep_8php.html">validation_rep.php</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
